(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/reply/reply"],{7415:function(t,e,n){"use strict";n.r(e);var r=n("ca77"),o=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},a5ea:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var r={uniPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-popup/components/uni-popup/uni-popup")]).then(n.bind(null,"aa27"))},uToast:function(){return n.e("node-modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"8176"))}},o=function(){var t=this,e=t.$createElement;t._self._c},i=[]},b108:function(t,e,n){"use strict";var r=n("bdf7"),o=n.n(r);o.a},bdf7:function(t,e,n){},ca77:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("304e");function o(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw s}}}}function i(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a={name:"reply",data:function(){return{height:"0px",emojiHeight:0,login:!1,userimg:"",textarea:"",imgPath:[],emojiArr:[],imageReplyHeight:"140px",serverImgPath:[],imgNum:0}},created:function(){for(var t=0;t<26;t++)this.emojiArr.push(t+1)},computed:{replyShow:function(){return this.$store.state.reply.show}},watch:{replyShow:function(t){t?this.$refs.popup.open():this.$refs.popup.close()},imgPath:function(t){this.imageReplyHeight="100vh"},imgNum:function(e){var n=this;if(this.imgNum===this.imgPath.length){var o=new Date;(0,r.comment)({userid:this.$store.state.user.id,articleid:this.$store.state.reply.data.articleid,txt:this.textarea,img:""+this.serverImgPath,time:o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),second:(new Date).getTime(),username:this.$store.state.user.name,userimg:this.$store.state.user.img}).then((function(e){if(0===e){n.sendTips();var r=n;t.startPullDownRefresh({success:function(){r.$store.commit("updateReplyShow",!1)}})}else n.$refs.uToast.show({title:"发送失败",type:"error "})}))}}},methods:{sendTips:function(){this.$refs.uToast.show({title:"发送成功",type:"success ",duration:500})},change:function(t){!1===t.show&&(this.$store.commit("updateReplyShow",!1),this.emojiHeight=0)},emojiShow:function(){0==this.emojiHeight?this.emojiHeight=200:this.emojiHeight=0},closeUnloadImage:function(){this.imageReplyHeight="0px"},unloadImg:function(){var e=this;t.chooseImage({count:9,success:function(t){var n,r=t.tempFilePaths,i=o(r);try{for(i.s();!(n=i.n()).done;){var s=n.value;e.imgnum++,e.imgPath.push(s)}}catch(a){i.e(a)}finally{i.f()}}})},emojiChange:function(e){var n=this;t.createSelectorQuery().in(this).select("#editor").context((function(t){n.editorCtx=t.context,t.context.insertImage({src:"http://res.goomee.top/image/emoji/emoji_"+e+".png",width:30,height:30}),n.editorCtx.getContents({success:function(t){console.log(t.html)}})})).exec()},inputComment:function(){var e=this;new Promise((function(n,r){t.createSelectorQuery().in(e).select("#editor").context((function(t){e.editorCtx=t.context,t.context.getContents({success:function(t){e.textarea=e.$global(t.html),n(e.$global(t.html))}})})).exec()})).then((function(n){if(e.imgPath.length>0){var i,s=o(e.imgPath);try{for(s.s();!(i=s.n()).done;){var a=i.value;t.uploadFile({url:"http://101.132.235.218:4000/api/imgcomment",filePath:a,name:"avatar",success:function(t){e.serverImgPath.push(t.data),e.imgNum++}})}}catch(c){s.e(c)}finally{s.f()}}var u=new Date;"tiezi"===e.$store.state.reply.type&&e.imgPath.length<1?(0,r.comment)({userid:e.$store.state.user.id,articleid:e.$store.state.reply.data.articleid,txt:n,img:"",time:u.getFullYear()+"-"+(u.getMonth()+1)+"-"+u.getDate(),second:(new Date).getTime(),username:e.$store.state.user.name,userimg:e.$store.state.user.img}).then((function(n){if(0===n){e.sendTips();var r=e;t.startPullDownRefresh({success:function(){r.$store.commit("updateReplyShow",!1)}})}else e.$refs.uToast.show({title:"发送失败",type:"error "})})):"comment"===e.$store.state.reply.type?(0,r.commentSon)({fatherid:e.$store.state.reply.data.fatherid,articleid:e.$store.state.reply.data.articleid,userid:e.$store.state.user.id,txt:n,time:u.getFullYear()+"-"+(u.getMonth()+1)+"-"+u.getDate(),second:(new Date).getTime(),username:e.$store.state.user.name,userimg:e.$store.state.user.img}).then((function(n){if(0===n){e.sendTips();var r=e;t.startPullDownRefresh({success:function(){r.$store.commit("updateReplyShow",!1)}})}else e.$refs.uToast.show({title:"发送失败",type:"error "})})):"commentSon"===e.$store.state.reply.type&&commentSontwo({fatherid:e.$store.state.reply.data.fatherid,articleid:e.$store.state.reply.data.articleid,userid:e.$store.state.user.id,txt:n,time:u.getFullYear()+"-"+(u.getMonth()+1)+"-"+u.getDate(),second:(new Date).getTime(),username:e.$store.state.user.name,userimg:e.$store.state.user.img,parentUserid:e.$store.state.reply.data.parentUserid,parentUserName:e.$store.state.reply.data.parentUserName}).then((function(n){if(0===n){e.sendTips();var r=e;t.startPullDownRefresh({success:function(){r.$store.commit("updateReplyShow",!1)}})}else e.$refs.uToast.show({title:"发送失败",type:"error "})}))}))}}};e.default=a}).call(this,n("543d")["default"])},dd8c:function(t,e,n){"use strict";n.r(e);var r=n("a5ea"),o=n("7415");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("b108");var s,a=n("f0c5"),u=Object(a["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);e["default"]=u.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/reply/reply-create-component',
    {
        'components/reply/reply-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("dd8c"))
        })
    },
    [['components/reply/reply-create-component']]
]);
