(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{3352:function(e,t,n){"use strict";(function(e){n("b09c");o(n("66fd"));var t=o(n("4e00"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"45b0":function(e,t,n){},"4e00":function(e,t,n){"use strict";n.r(t);var o=n("5164"),a=n("6ff1");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("ae7a");var r,c=n("f0c5"),u=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"244d5e91",null,!1,o["a"],r);t["default"]=u.exports},"4e3d":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("304e"),a=function(){n.e("components/home/follow").then(function(){return resolve(n("1ef3"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("components/home/recommend/recommend").then(function(){return resolve(n("a525"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/home/video-page").then(function(){return resolve(n("6e83"))}.bind(null,n)).catch(n.oe)},c={data:function(){return{list:[{name:"关注"},{name:"推荐"},{name:"热榜"},{name:"直播"},{name:"视频号"}],tabs:[1,2,3,4,5],current:1,swiperCurrent:1,maskShow:!1,followShow:!1,videoPageShow:!1,recommendData:{article:[],topicId:[]},followData:{acticleArr:[]},videoPageArr:[],refresherTriggered:!1}},components:{recommend:i,follow:a,videoPage:r},watch:{current:function(e){switch(e){case 0:this.followShow||(this.followRequest(),this.followShow=!0);break;case 4:this.videoPageRequest(),this.videoPageShow=!0;break}}},onPullDownRefresh:function(){switch(this.current){case 0:this.followData.acticleArr=[],this.followRequest(),this.$nextTick((function(){e.stopPullDownRefresh()}));break;case 1:this.recommendData={article:[],topicId:[]},this.recommend(),this.$nextTick((function(){e.stopPullDownRefresh()}));break;case 4:this.videoPageArr=[],this.videoPageRequest(),this.$nextTick((function(){e.stopPullDownRefresh()}));break}},methods:{toSearch:function(){e.navigateTo({url:"../search/search"})},reply:function(){this.maskShow=!0},toFatie:function(){this.$store.state.login?e.navigateTo({url:"../fatie/fatie"}):e.navigateTo({url:"../login/login"})},tabsChange:function(e){this.swiperCurrent=e},change:function(e){},transition:function(e){var t=e.detail.dx;this.$refs.uTabs.setDx(t)},animationfinish:function(e){var t=e.detail.current;this.$refs.uTabs.setFinishCurrent(t),this.swiperCurrent=t,this.current=t},recommend:function(){var e=this;(0,o.selectArticle)().then((function(t){e.recommendData.article=t;for(var n=0;n<t.length;n++)e.recommendData.topicId.push(t[n].topicid)})).then((function(){for(var t=function(t){(0,o.selectTopic)(e.recommendData.topicId[t]).then((function(n){e.$set(e.recommendData.article[t],"baimg",n.img),e.$set(e.recommendData.article[t],"name",n.name),e.$set(e.recommendData.article[t],"guanzhu",n.guanzhu),e.$set(e.recommendData.article[t],"tiezi",n.tiezi)}))},n=0;n<e.recommendData.topicId.length;n++)t(n)}))},followRequest:function(){var e=this;if(null!==this.$store.state.user){for(var t=[],n=JSON.parse(JSON.stringify(this.$store.state.user.followUser)),a=0;a<n.length;a++)t[a]=(0,o.selectFollowActicle)(n[a]);Promise.all(t).then((function(t){for(var n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)e.followData.acticleArr.push(t[n][o]);for(var a=0;a<e.followData.acticleArr.length-1;a++)for(var i=0;i<e.followData.acticleArr.length-1-a;i++)if(e.followData.acticleArr[i].id<e.followData.acticleArr[i+1].id){var r=e.followData.acticleArr[i];e.followData.acticleArr[i]=e.followData.acticleArr[i+1],e.followData.acticleArr[i+1]=r}}))}},videoPageRequest:function(){var e=this;(0,o.videoPageRequest)().then((function(t){e.videoPageArr=t}))}},onLoad:function(){this.recommend()}};t.default=c}).call(this,n("543d")["default"])},5164:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uNavbar:function(){return n.e("node-modules/uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"e4e3"))},uMask:function(){return n.e("node-modules/uview-ui/components/u-mask/u-mask").then(n.bind(null,"cc75"))},uImage:function(){return n.e("node-modules/uview-ui/components/u-image/u-image").then(n.bind(null,"77e3"))},uTabsSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-tabs-swiper/u-tabs-swiper")]).then(n.bind(null,"422e"))}},a=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.maskShow=!1})},i=[]},"6ff1":function(e,t,n){"use strict";n.r(t);var o=n("4e3d"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},ae7a:function(e,t,n){"use strict";var o=n("45b0"),a=n.n(o);a.a}},[["3352","common/runtime","common/vendor"]]]);